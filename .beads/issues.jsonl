{"id":"ideal-telegram-1","title":"Phase 1: Project Setup","description":"Initialize SvelteKit project, PostgreSQL + Drizzle ORM, Docker Compose configuration, and core dependencies.\n\n**Key deliverables:**\n- SvelteKit project with TypeScript\n- PostgreSQL + Drizzle ORM schema\n- Docker Compose (app, db, redis, ml-service)\n- Dependencies: @atproto/oauth-client-node, @atproto/api, drizzle-orm, postgres, bullmq, ioredis, resend","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-22T02:58:25Z","updated_at":"2025-12-26T11:17:27.242285-08:00","closed_at":"2025-12-26T11:17:27.242285-08:00","close_reason":"All Phase 1 tasks completed: SvelteKit project, Drizzle schema, Docker Compose, dependencies installed"}
{"id":"ideal-telegram-101","title":"Initialize SvelteKit project with TypeScript","description":"Create new SvelteKit project with TypeScript configuration.\n\n```bash\nnpm create svelte@latest toxicity-shield\n```\n\nSelect TypeScript, ESLint, Prettier options.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T02:58:50Z","updated_at":"2025-12-26T18:53:15Z","closed_at":"2025-12-26T18:53:15Z","close_reason":"Completed: SvelteKit project initialized with TypeScript, ESLint, and Prettier","dependencies":[{"issue_id":"ideal-telegram-101","depends_on_id":"ideal-telegram-1","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-102","title":"Set up PostgreSQL + Drizzle ORM with schema","description":"Configure Drizzle ORM and create database schema:\n\n**Tables:**\n- users (did, handle, email, action_mode, toxicity_threshold, monitoring_enabled)\n- flagged_users (owner_did, flagged_did, aggregate_toxicity_score, toxic_post_count, status)\n- toxic_evidence (post_uri, post_text, toxicity_scores, primary_category, interaction_type)\n\nCreate `src/lib/db/schema.ts` with Drizzle schema definitions.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T02:58:50Z","updated_at":"2025-12-26T11:16:58.841888-08:00","closed_at":"2025-12-26T11:16:58.841888-08:00","close_reason":"Completed Phase 1 setup: Drizzle schema, Docker Compose, and core dependencies","dependencies":[{"issue_id":"ideal-telegram-102","depends_on_id":"ideal-telegram-1","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-103","title":"Configure Docker Compose","description":"Create `docker-compose.yml` with services:\n- app (SvelteKit)\n- db (PostgreSQL)\n- redis (for BullMQ)\n- ml-service (Python FastAPI)\n\nInclude volume mounts, environment variables, and networking.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T02:58:50Z","updated_at":"2025-12-26T11:16:58.84532-08:00","closed_at":"2025-12-26T11:16:58.84532-08:00","close_reason":"Completed Phase 1 setup: Drizzle schema, Docker Compose, and core dependencies","dependencies":[{"issue_id":"ideal-telegram-103","depends_on_id":"ideal-telegram-1","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-104","title":"Install core dependencies","description":"Install required npm packages:\n\n```bash\nnpm install @atproto/oauth-client-node @atproto/api drizzle-orm postgres bullmq ioredis resend\nnpm install -D drizzle-kit @types/node\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T02:58:50Z","updated_at":"2025-12-26T11:16:58.846266-08:00","closed_at":"2025-12-26T11:16:58.846266-08:00","close_reason":"Completed Phase 1 setup: Drizzle schema, Docker Compose, and core dependencies","dependencies":[{"issue_id":"ideal-telegram-104","depends_on_id":"ideal-telegram-1","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-17r","title":"Create login page UI","description":"Create a SvelteKit page at /auth/login with a form for users to enter their Bluesky handle. The form should POST to /auth/login endpoint which redirects to OAuth.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T20:16:17.810113-08:00","updated_at":"2025-12-26T20:46:23.582367-08:00","closed_at":"2025-12-26T20:46:23.582367-08:00","close_reason":"Created calm, sanctuary-themed login page with sage/lavender color palette, floating shapes, and frosted glass card design","dependencies":[{"issue_id":"ideal-telegram-17r","depends_on_id":"ideal-telegram-2","type":"blocks","created_at":"2025-12-26T20:16:51.49674-08:00","created_by":"daemon"}]}
{"id":"ideal-telegram-2","title":"Phase 2: OAuth Authentication","description":"AT Protocol OAuth with DPoP token handling, session management, and login/logout routes.\n\n**Key deliverables:**\n- /client-metadata.json endpoint\n- OAuth flow with DPoP tokens\n- Session management with encrypted cookies\n- Login/logout routes","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-22T02:58:25Z","updated_at":"2025-12-26T20:16:56.173974-08:00","closed_at":"2025-12-26T20:16:56.173974-08:00","close_reason":"All core OAuth authentication features implemented: client-metadata endpoint, OAuth flow with DPoP, session management with encrypted cookies, login/logout routes. Additional polish tasks created for login UI, persistent OAuth store, and token revocation.","dependencies":[{"issue_id":"ideal-telegram-2","depends_on_id":"ideal-telegram-1","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-201","title":"Create /client-metadata.json endpoint","description":"Implement AT Protocol OAuth client metadata endpoint.\n\nCreate `src/routes/client-metadata.json/+server.ts`:\n- client_id, client_name, client_uri\n- redirect_uris, grant_types, response_types\n- scope, token_endpoint_auth_method\n- dpop_bound_access_tokens: true","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T02:59:05Z","updated_at":"2025-12-26T17:59:27.358365-08:00","closed_at":"2025-12-26T17:59:27.358365-08:00","close_reason":"Implemented /client-metadata.json endpoint with all required AT Protocol OAuth fields","dependencies":[{"issue_id":"ideal-telegram-201","depends_on_id":"ideal-telegram-2","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-202","title":"Implement OAuth flow with DPoP token handling","description":"Create OAuth client with DPoP support.\n\nCreate `src/lib/oauth/client.ts`:\n- Initialize @atproto/oauth-client-node\n- Configure authorization URL generation\n- Handle token exchange with DPoP proofs\n- Implement token refresh logic","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T02:59:05Z","updated_at":"2025-12-26T19:03:44.902528-08:00","closed_at":"2025-12-26T19:03:44.902528-08:00","close_reason":"Implemented OAuth client with DPoP support, stores, and tests","dependencies":[{"issue_id":"ideal-telegram-202","depends_on_id":"ideal-telegram-2","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-203","title":"Build session management with encrypted cookies","description":"Secure session handling.\n\n- Use SvelteKit hooks for session middleware\n- Encrypt tokens before storing in cookies\n- Handle session expiration and refresh\n- Create session types in `src/lib/types.ts`","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T02:59:05Z","updated_at":"2025-12-26T19:57:37.384458-08:00","closed_at":"2025-12-26T19:57:37.384458-08:00","close_reason":"Implemented session management with encrypted cookies using TDD. All 48 tests pass.","dependencies":[{"issue_id":"ideal-telegram-203","depends_on_id":"ideal-telegram-2","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"},{"issue_id":"ideal-telegram-203","depends_on_id":"ideal-telegram-102","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-204","title":"Create login/logout routes","description":"Authentication routes.\n\n- `src/routes/auth/login/+server.ts` - Initiate OAuth\n- `src/routes/auth/callback/+server.ts` - Handle OAuth callback\n- `src/routes/auth/logout/+server.ts` - Clear session\n- Add protected route guards","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T02:59:05Z","updated_at":"2025-12-26T20:09:25.219115-08:00","closed_at":"2025-12-26T20:09:25.219115-08:00","close_reason":"Implemented login/logout routes and protected route guards using TDD. All 70 tests pass.","dependencies":[{"issue_id":"ideal-telegram-204","depends_on_id":"ideal-telegram-2","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-24e","title":"Install and configure Vitest","description":"Install Vitest and configure for SvelteKit.\n\nSteps:\n1. Install vitest, @testing-library/svelte, jsdom\n2. Create vitest.config.ts with SvelteKit integration\n3. Add test scripts to package.json\n4. Verify setup with a simple test","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T18:30:33.729158-08:00","updated_at":"2025-12-26T18:36:30.703473-08:00","closed_at":"2025-12-26T18:36:30.703473-08:00","close_reason":"Vitest configured with SvelteKit, test scripts added, all tests passing","dependencies":[{"issue_id":"ideal-telegram-24e","depends_on_id":"ideal-telegram-v6x","type":"blocks","created_at":"2025-12-26T18:30:56.905523-08:00","created_by":"daemon"}]}
{"id":"ideal-telegram-3","title":"Phase 3: Historical Analysis","description":"Bluesky API client, Constellation backlink queries, and analysis pipeline for scoring toxic interactions.\n\n**Key deliverables:**\n- Bluesky API client (getAuthorFeed)\n- Constellation client for backlinks\n- Analysis pipeline: Fetch posts → Get DIDs → Fetch their posts → Score","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-22T02:58:25Z","updated_at":"2025-12-22T02:58:25Z","dependencies":[{"issue_id":"ideal-telegram-3","depends_on_id":"ideal-telegram-2","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-301","title":"Implement Bluesky API client","description":"Create Bluesky API wrapper.\n\nCreate `src/lib/api/bluesky.ts`:\n- getAuthorFeed() - Fetch user posts\n- getProfile() - Get user profile\n- Rate limiting (10 req/s token bucket)\n- Error handling and retries","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T02:59:27Z","updated_at":"2025-12-22T02:59:27Z","dependencies":[{"issue_id":"ideal-telegram-301","depends_on_id":"ideal-telegram-3","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"},{"issue_id":"ideal-telegram-301","depends_on_id":"ideal-telegram-204","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-302","title":"Implement Constellation backlink client","description":"Query who interacted with user.\n\nCreate `src/lib/api/constellation.ts`:\n- getBacklinks() with source filters:\n  - `app.bsky.feed.post:reply.parent.uri` (replies)\n  - `app.bsky.feed.post:facets.features.did` (mentions)\n- Pagination handling\n- URL: constellation.microcosm.blue","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T02:59:27Z","updated_at":"2025-12-22T02:59:27Z","dependencies":[{"issue_id":"ideal-telegram-302","depends_on_id":"ideal-telegram-3","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"},{"issue_id":"ideal-telegram-302","depends_on_id":"ideal-telegram-301","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-303","title":"Build historical analysis pipeline","description":"End-to-end analysis flow.\n\nPipeline steps:\n1. Fetch user posts\n2. Get interacting DIDs via Constellation\n3. Fetch interactors posts\n4. Send to ML service for scoring\n5. Store results in flagged_users and toxic_evidence\n\nCreate `src/lib/analysis/historical.ts`","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T02:59:27Z","updated_at":"2025-12-22T02:59:27Z","dependencies":[{"issue_id":"ideal-telegram-303","depends_on_id":"ideal-telegram-3","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"},{"issue_id":"ideal-telegram-303","depends_on_id":"ideal-telegram-302","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-4","title":"Phase 4: ML Service","description":"Python FastAPI service with Detoxify for toxicity classification.\n\n**Key deliverables:**\n- FastAPI service with Detoxify model\n- /analyze endpoint for batch text\n- Scores: toxic, severe_toxic, obscene, threat, insult, identity_attack\n- Configurable thresholds","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-22T02:58:25Z","updated_at":"2025-12-22T02:58:25Z"}
{"id":"ideal-telegram-401","title":"Create Python FastAPI service with Detoxify","description":"ML service setup.\n\nCreate `ml-service/main.py`:\n- FastAPI app initialization\n- Load Detoxify model on startup\n- Health check endpoint\n- CORS configuration for local dev\n\nCreate `ml-service/Dockerfile` and `requirements.txt`","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T02:59:39Z","updated_at":"2025-12-22T02:59:39Z","dependencies":[{"issue_id":"ideal-telegram-401","depends_on_id":"ideal-telegram-4","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-402","title":"Implement /analyze batch endpoint","description":"Text analysis API.\n\nEndpoint: POST /analyze\n- Accept batch of texts (list of strings)\n- Return toxicity scores per text:\n  - toxic, severe_toxic, obscene\n  - threat, insult, identity_attack\n- Classification with configurable thresholds\n- Response format with primary_category","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T02:59:39Z","updated_at":"2025-12-22T02:59:39Z","dependencies":[{"issue_id":"ideal-telegram-402","depends_on_id":"ideal-telegram-4","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-403","title":"Create ML service client in TypeScript","description":"Client for calling ML service.\n\nCreate `src/lib/ml/toxicity.ts`:\n- analyzeTexts() - batch analysis\n- classifyToxicity() - threshold-based classification\n- Error handling and timeouts\n- Connection pooling","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T02:59:39Z","updated_at":"2025-12-22T02:59:39Z","dependencies":[{"issue_id":"ideal-telegram-403","depends_on_id":"ideal-telegram-4","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"},{"issue_id":"ideal-telegram-403","depends_on_id":"ideal-telegram-402","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-5","title":"Phase 5: Real-Time Firehose","description":"Spacedust WebSocket client for real-time interaction monitoring.\n\n**Key deliverables:**\n- Spacedust WebSocket client\n- Event filtering by user DID\n- Buffering and batching for ML analysis\n- Background worker for continuous processing","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-22T02:58:25Z","updated_at":"2025-12-22T02:58:25Z","dependencies":[{"issue_id":"ideal-telegram-5","depends_on_id":"ideal-telegram-3","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"},{"issue_id":"ideal-telegram-5","depends_on_id":"ideal-telegram-4","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-501","title":"Implement Spacedust WebSocket client","description":"Real-time firehose connection.\n\nCreate `src/lib/api/spacedust.ts`:\n- WebSocket connection to spacedust.microcosm.blue\n- Subscribe with wantedSubjectDids parameter\n- Reconnection logic with backoff\n- Event parsing and typing","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T02:59:53Z","updated_at":"2025-12-22T02:59:53Z","dependencies":[{"issue_id":"ideal-telegram-501","depends_on_id":"ideal-telegram-5","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-502","title":"Filter events by user DID","description":"Event filtering logic.\n\nFilter for:\n- Replies targeting user posts\n- Mentions of user DID\n- Quote posts of user content\n\nCreate `src/lib/firehose/filter.ts`","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T02:59:53Z","updated_at":"2025-12-22T02:59:53Z","dependencies":[{"issue_id":"ideal-telegram-502","depends_on_id":"ideal-telegram-5","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"},{"issue_id":"ideal-telegram-502","depends_on_id":"ideal-telegram-501","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-503","title":"Implement event buffering and batching","description":"Efficient ML processing.\n\n- Buffer incoming events\n- Batch for ML analysis (e.g., every 10 events or 5 seconds)\n- Deduplication of repeated actors\n- Memory limits and overflow handling\n\nCreate `src/lib/firehose/buffer.ts`","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T02:59:53Z","updated_at":"2025-12-22T02:59:53Z","dependencies":[{"issue_id":"ideal-telegram-503","depends_on_id":"ideal-telegram-5","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"},{"issue_id":"ideal-telegram-503","depends_on_id":"ideal-telegram-502","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-504","title":"Create background firehose worker","description":"Continuous processing.\n\nCreate `workers/firehose.ts`:\n- Long-running process\n- Process ML results\n- Update database with flagged users\n- Trigger auto-actions based on settings\n\nUse BullMQ for job queuing.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T02:59:53Z","updated_at":"2025-12-22T02:59:53Z","dependencies":[{"issue_id":"ideal-telegram-504","depends_on_id":"ideal-telegram-5","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"},{"issue_id":"ideal-telegram-504","depends_on_id":"ideal-telegram-503","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"},{"issue_id":"ideal-telegram-504","depends_on_id":"ideal-telegram-403","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-6","title":"Phase 6: Dashboard UI","description":"Main dashboard with toxicity cards, action buttons, and settings page.\n\n**Key deliverables:**\n- Filter tabs (Pending, Blocked, Dismissed)\n- ToxicityCard component\n- Action buttons (Block, Mute, Dismiss)\n- Settings page","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-22T02:58:25Z","updated_at":"2025-12-22T02:58:25Z","dependencies":[{"issue_id":"ideal-telegram-6","depends_on_id":"ideal-telegram-3","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-601","title":"Create main dashboard with filter tabs","description":"Dashboard page structure.\n\nCreate `src/routes/dashboard/+page.svelte`:\n- Tab navigation: Pending | Blocked | Muted | Dismissed\n- Load flagged_users based on selected status\n- Pagination for large lists\n- Empty states for each tab","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T03:00:15Z","updated_at":"2025-12-22T03:00:15Z","dependencies":[{"issue_id":"ideal-telegram-601","depends_on_id":"ideal-telegram-6","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-602","title":"Build ToxicityCard component","description":"Display flagged user info.\n\nCreate `src/lib/components/ToxicityCard.svelte`:\n- User handle and avatar (via Slingshot)\n- Aggregate toxicity score gauge/meter\n- Primary concern category badge\n- Toxic post count indicator\n- Expandable evidence panel showing example posts\n- Timestamps (first detected, last activity)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T03:00:15Z","updated_at":"2025-12-22T03:00:15Z","dependencies":[{"issue_id":"ideal-telegram-602","depends_on_id":"ideal-telegram-6","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"},{"issue_id":"ideal-telegram-602","depends_on_id":"ideal-telegram-601","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-603","title":"Implement action buttons","description":"User moderation actions.\n\nAdd to ToxicityCard:\n- Block button (creates app.bsky.graph.block)\n- Mute button (calls muteActor)\n- Dismiss button (marks as dismissed)\n- Loading states and confirmations\n- Success/error feedback","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T03:00:15Z","updated_at":"2025-12-22T03:00:15Z","dependencies":[{"issue_id":"ideal-telegram-603","depends_on_id":"ideal-telegram-6","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"},{"issue_id":"ideal-telegram-603","depends_on_id":"ideal-telegram-602","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-604","title":"Create settings page","description":"User preferences.\n\nCreate `src/routes/settings/+page.svelte`:\n- Action mode selector (auto_block, dashboard, email_digest)\n- Toxicity threshold slider (0.0 - 1.0)\n- Monitoring toggle (enable/disable)\n- Email address for digests\n- Save/cancel buttons with validation","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T03:00:15Z","updated_at":"2025-12-22T03:00:15Z","dependencies":[{"issue_id":"ideal-telegram-604","depends_on_id":"ideal-telegram-6","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-7","title":"Phase 7: Email Digest","description":"Resend integration for daily/weekly toxicity digest emails.\n\n**Key deliverables:**\n- Resend email integration\n- HTML digest templates\n- Daily/weekly cron jobs\n- Duplicate notification prevention","status":"open","priority":3,"issue_type":"epic","created_at":"2025-12-22T02:58:25Z","updated_at":"2025-12-22T02:58:25Z","dependencies":[{"issue_id":"ideal-telegram-7","depends_on_id":"ideal-telegram-6","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-701","title":"Integrate Resend for transactional email","description":"Email service setup.\n\nCreate `src/lib/email/resend.ts`:\n- Initialize Resend client\n- sendDigestEmail() function\n- Error handling and retries\n- Email templates folder structure","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-22T03:00:29Z","updated_at":"2025-12-22T03:00:29Z","dependencies":[{"issue_id":"ideal-telegram-701","depends_on_id":"ideal-telegram-7","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-702","title":"Create HTML digest email template","description":"Digest email content.\n\nCreate `src/lib/email/templates/digest.html`:\n- Header with date range\n- Summary stats (new flagged users, actions taken)\n- Table of flagged users with:\n  - Handle, avatar\n  - Toxicity score\n  - Primary category\n  - Quick action links\n- Footer with settings link","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-22T03:00:29Z","updated_at":"2025-12-22T03:00:29Z","dependencies":[{"issue_id":"ideal-telegram-702","depends_on_id":"ideal-telegram-7","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"},{"issue_id":"ideal-telegram-702","depends_on_id":"ideal-telegram-701","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-703","title":"Implement daily/weekly digest cron jobs","description":"Scheduled email sending.\n\nCreate `workers/digest.ts`:\n- Daily digest job (morning)\n- Weekly digest job (Monday morning)\n- Query flagged users since last digest\n- Track last_digest_sent to avoid duplicates\n- BullMQ scheduled jobs","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-22T03:00:29Z","updated_at":"2025-12-22T03:00:29Z","dependencies":[{"issue_id":"ideal-telegram-703","depends_on_id":"ideal-telegram-7","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"},{"issue_id":"ideal-telegram-703","depends_on_id":"ideal-telegram-702","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-704","title":"Add notification deduplication","description":"Prevent duplicate notifications.\n\n- Track notification_sent_at per flagged_user\n- Skip already-notified users\n- Reset on new toxic activity\n- Database migration for tracking field","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-22T03:00:29Z","updated_at":"2025-12-22T03:00:29Z","dependencies":[{"issue_id":"ideal-telegram-704","depends_on_id":"ideal-telegram-7","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-7w7","title":"Add OAuth token revocation on logout","description":"When a user logs out, revoke their OAuth tokens at the authorization server using the revocation endpoint. This ensures tokens cannot be reused.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-26T20:16:20.421736-08:00","updated_at":"2025-12-26T20:16:20.421736-08:00","dependencies":[{"issue_id":"ideal-telegram-7w7","depends_on_id":"ideal-telegram-2","type":"blocks","created_at":"2025-12-26T20:16:51.600722-08:00","created_by":"daemon"}]}
{"id":"ideal-telegram-8","title":"Phase 8: Block/Mute Actions","description":"Bluesky block/mute record creation with auto-action triggers.\n\n**Key deliverables:**\n- Block records via com.atproto.repo.createRecord\n- Mute via app.bsky.graph.muteActor\n- Auto-action based on user settings\n- Status updates after actions","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-22T02:58:25Z","updated_at":"2025-12-22T02:58:25Z","dependencies":[{"issue_id":"ideal-telegram-8","depends_on_id":"ideal-telegram-2","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-801","title":"Implement block record creation","description":"Bluesky block functionality.\n\nCreate `src/lib/actions/block.ts`:\n```typescript\nawait agent.api.com.atproto.repo.createRecord({\n  repo: session.did,\n  collection: 'app.bsky.graph.block',\n  record: {\n    $type: 'app.bsky.graph.block',\n    subject: targetDid,\n    createdAt: new Date().toISOString()\n  }\n});\n```\n- Error handling for already blocked\n- Update flagged_users status to 'blocked'","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T03:00:44Z","updated_at":"2025-12-22T03:00:44Z","dependencies":[{"issue_id":"ideal-telegram-801","depends_on_id":"ideal-telegram-8","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-802","title":"Implement mute functionality","description":"Bluesky mute functionality.\n\nCreate `src/lib/actions/mute.ts`:\n- Call app.bsky.graph.muteActor\n- Update flagged_users status to 'muted'\n- Note: Mutes are private (unlike blocks)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T03:00:44Z","updated_at":"2025-12-22T03:00:44Z","dependencies":[{"issue_id":"ideal-telegram-802","depends_on_id":"ideal-telegram-8","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"},{"issue_id":"ideal-telegram-802","depends_on_id":"ideal-telegram-801","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-803","title":"Create auto-action trigger system","description":"Automatic moderation.\n\nCreate `src/lib/actions/auto.ts`:\n- Check user settings (action_mode)\n- On new flagged user above threshold:\n  - auto_block: Create block immediately\n  - dashboard: Just flag for review\n  - email_digest: Flag and queue for digest\n- Logging and audit trail","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T03:00:44Z","updated_at":"2025-12-22T03:00:44Z","dependencies":[{"issue_id":"ideal-telegram-803","depends_on_id":"ideal-telegram-8","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"},{"issue_id":"ideal-telegram-803","depends_on_id":"ideal-telegram-801","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"},{"issue_id":"ideal-telegram-803","depends_on_id":"ideal-telegram-802","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-804","title":"Update flagged_users status after actions","description":"Status management.\n\n- Transition: pending → blocked/muted/dismissed\n- Record action timestamp\n- Track who took action (user vs auto)\n- API endpoint for status updates\n\nCreate `src/routes/api/flagged/[id]/+server.ts`","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T03:00:44Z","updated_at":"2025-12-22T03:00:44Z","dependencies":[{"issue_id":"ideal-telegram-804","depends_on_id":"ideal-telegram-8","type":"parent","created_at":"2025-12-22T03:01:15Z","created_by":"claude","metadata":"{}"},{"issue_id":"ideal-telegram-804","depends_on_id":"ideal-telegram-803","type":"blocks","created_at":"2025-12-22T03:01:47Z","created_by":"claude","metadata":"{}"}]}
{"id":"ideal-telegram-ogy","title":"Implement persistent OAuth session store","description":"Replace MemorySessionStore with a Redis or PostgreSQL-backed store for OAuth sessions. Current implementation loses OAuth refresh tokens on server restart. Should implement SessionStore interface from @atproto/oauth-client-node.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T20:16:19.110357-08:00","updated_at":"2025-12-26T20:16:19.110357-08:00","dependencies":[{"issue_id":"ideal-telegram-ogy","depends_on_id":"ideal-telegram-2","type":"blocks","created_at":"2025-12-26T20:16:51.549152-08:00","created_by":"daemon"}]}
{"id":"ideal-telegram-v6x","title":"Testing Infrastructure Setup","description":"Set up Vitest testing framework with TDD workflow support.\n\nDeliverables:\n- Vitest configured with SvelteKit\n- Test scripts in package.json\n- Coverage reporting\n- Example tests for existing code","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-26T18:30:26.945297-08:00","updated_at":"2025-12-26T18:36:41.4021-08:00","closed_at":"2025-12-26T18:36:41.4021-08:00","close_reason":"Testing infrastructure complete: Vitest configured, test scripts added, example tests passing"}
{"id":"ideal-telegram-vmk","title":"Write tests for /client-metadata.json endpoint","description":"Create unit tests for the OAuth client metadata endpoint.\n\nTest cases:\n- Returns valid JSON with correct content-type\n- Includes all required OAuth fields\n- client_id matches request URL\n- dpop_bound_access_tokens is true\n- redirect_uris points to /auth/callback","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T18:30:42.476826-08:00","updated_at":"2025-12-26T18:36:30.746429-08:00","closed_at":"2025-12-26T18:36:30.746429-08:00","close_reason":"Tests for /client-metadata.json endpoint implemented and passing","dependencies":[{"issue_id":"ideal-telegram-vmk","depends_on_id":"ideal-telegram-v6x","type":"blocks","created_at":"2025-12-26T18:30:56.948135-08:00","created_by":"daemon"},{"issue_id":"ideal-telegram-vmk","depends_on_id":"ideal-telegram-24e","type":"blocks","created_at":"2025-12-26T18:30:56.991009-08:00","created_by":"daemon"}]}
